

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>1. Introduction</title>
    
    <link rel="stylesheet" href="_static/epub.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="INSTALL.html" title="2. Installation"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="PyMC Userâ€™s Guide"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">PyMC 2.2 documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="document">
      <div class="documentwrapper">
          <div class="body">
            
  <div class="section" id="introduction">
<h1>1. Introduction</h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Date:</th><td class="field-body">16 February 2011</td>
</tr>
<tr class="field-even field"><th class="field-name">Authors:</th><td class="field-body">Chris Fonnesbeck, Anand Patil, David Huard, John Salvatier</td>
</tr>
<tr class="field-odd field"><th class="field-name">Contact:</th><td class="field-body"><a class="reference external" href="mailto:chris&#46;fonnesbeck&#37;&#52;&#48;vanderbilt&#46;edu">chris<span>&#46;</span>fonnesbeck<span>&#64;</span>vanderbilt<span>&#46;</span>edu</a></td>
</tr>
<tr class="field-even field"><th class="field-name">Web site:</th><td class="field-body"><a class="reference external" href="http://github.com/pymc-devs/pymc">http://github.com/pymc-devs/pymc</a></td>
</tr>
<tr class="field-odd field"><th class="field-name">Copyright:</th><td class="field-body">This document has been placed in the public domain.</td>
</tr>
<tr class="field-even field"><th class="field-name">License:</th><td class="field-body">PyMC is released under the MIT license.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Version:</th><td class="field-body">2.2</td>
</tr>
</tbody>
</table>
<div class="section" id="purpose">
<h2>1.1. Purpose</h2>
<p>PyMC is a python module that implements Bayesian statistical models and fitting
algorithms, including Markov chain Monte Carlo. Its flexibility and
extensibility make it applicable to a large suite of problems. Along with core
sampling functionality, PyMC includes methods for summarizing output, plotting,
goodness-of-fit and convergence diagnostics.</p>
</div>
<div class="section" id="features">
<h2>1.2. Features</h2>
<p>PyMC provides functionalities to make Bayesian analysis as painless as
possible. Here is a short list of some of its features:</p>
<ul class="simple">
<li>Fits Bayesian statistical models with Markov chain Monte Carlo and
other algorithms.</li>
<li>Includes a large suite of well-documented statistical distributions.</li>
<li>Uses NumPy for numerics wherever possible.</li>
<li>Includes a module for modeling Gaussian processes.</li>
<li>Sampling loops can be paused and tuned manually, or saved and restarted later.</li>
<li>Creates summaries including tables and plots.</li>
<li>Traces can be saved to the disk as plain text, Python pickles, SQLite or MySQL
database, or hdf5 archives.</li>
<li>Several convergence diagnostics are available.</li>
<li>Extensible: easily incorporates custom step methods and unusual probability
distributions.</li>
<li>MCMC loops can be embedded in larger programs, and results can be analyzed
with the full power of Python.</li>
</ul>
</div>
<div class="section" id="what-s-new-in-version-2">
<h2>1.3. What&#8217;s new in version 2</h2>
<p>This second version of PyMC benefits from a major rewrite effort. Substantial
improvements in code extensibility, user interface as well as in raw
performance have been achieved. Most notably, the PyMC 2 series provides:</p>
<ul class="simple">
<li>New flexible object model and syntax (not backward-compatible).</li>
<li>Reduced redundant computations: only relevant log-probability terms are
computed, and these are cached.</li>
<li>Optimized probability distributions.</li>
<li>New adaptive blocked Metropolis step method.</li>
<li>Much more!</li>
</ul>
</div>
<div class="section" id="usage">
<h2>1.4. Usage</h2>
<p>First, define your model in a file, say mymodel.py (with comments, of course!):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Import relevant modules</span>
<span class="kn">import</span> <span class="nn">pymc</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="c"># Some data</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">5</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="n">dtype</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
<span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-.</span><span class="mi">86</span><span class="p">,</span><span class="o">-.</span><span class="mi">3</span><span class="p">,</span><span class="o">-.</span><span class="mo">05</span><span class="p">,</span><span class="o">.</span><span class="mi">73</span><span class="p">])</span>

<span class="c"># Priors on unknown parameters</span>
<span class="n">alpha</span> <span class="o">=</span> <span class="n">pymc</span><span class="o">.</span><span class="n">Normal</span><span class="p">(</span><span class="s">&#39;alpha&#39;</span><span class="p">,</span><span class="n">mu</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">tau</span><span class="o">=.</span><span class="mo">01</span><span class="p">)</span>
<span class="n">beta</span> <span class="o">=</span> <span class="n">pymc</span><span class="o">.</span><span class="n">Normal</span><span class="p">(</span><span class="s">&#39;beta&#39;</span><span class="p">,</span><span class="n">mu</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">tau</span><span class="o">=.</span><span class="mo">01</span><span class="p">)</span>

<span class="c"># Arbitrary deterministic function of parameters</span>
<span class="nd">@pymc.deterministic</span>
<span class="k">def</span> <span class="nf">theta</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="n">alpha</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">beta</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;theta = logit^{-1}(a+b)&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">pymc</span><span class="o">.</span><span class="n">invlogit</span><span class="p">(</span><span class="n">a</span><span class="o">+</span><span class="n">b</span><span class="o">*</span><span class="n">x</span><span class="p">)</span>

<span class="c"># Binomial likelihood for data</span>
<span class="n">d</span> <span class="o">=</span> <span class="n">pymc</span><span class="o">.</span><span class="n">Binomial</span><span class="p">(</span><span class="s">&#39;d&#39;</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="n">n</span><span class="p">,</span> <span class="n">p</span><span class="o">=</span><span class="n">theta</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.</span><span class="p">,</span><span class="mf">1.</span><span class="p">,</span><span class="mf">3.</span><span class="p">,</span><span class="mf">5.</span><span class="p">]),</span>\
                  <span class="n">observed</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Save this file, then from a python shell (or another file in the same directory), call:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">pymc</span>
<span class="kn">import</span> <span class="nn">mymodel</span>

<span class="n">S</span> <span class="o">=</span> <span class="n">pymc</span><span class="o">.</span><span class="n">MCMC</span><span class="p">(</span><span class="n">mymodel</span><span class="p">,</span> <span class="n">db</span><span class="o">=</span><span class="s">&#39;pickle&#39;</span><span class="p">)</span>
<span class="n">S</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="nb">iter</span><span class="o">=</span><span class="mi">10000</span><span class="p">,</span> <span class="n">burn</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">thin</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">pymc</span><span class="o">.</span><span class="n">Matplot</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">S</span><span class="p">)</span>
</pre></div>
</div>
<p>This example will generate 10000 posterior samples, thinned by a factor of 2,
with the first half discarded as burn-in. The sample is stored in a Python
serialization (pickle) database.</p>
</div>
<div class="section" id="history">
<h2>1.5. History</h2>
<p>PyMC began development in 2003, as an effort to generalize the process of
building Metropolis-Hastings samplers, with an aim to making Markov chain Monte
Carlo (MCMC) more accessible to non-statisticians (particularly ecologists).
The choice to develop PyMC as a python module, rather than a standalone
application, allowed the use MCMC methods in a larger modeling framework. By
2005, PyMC was reliable enough for version 1.0 to be released to the public. A
small group of regular users, most associated with the University of Georgia,
provided much of the feedback necessary for the refinement of PyMC to a usable
state.</p>
<p>In 2006, David Huard and Anand Patil joined Chris Fonnesbeck on the development
team for PyMC 2.0. This iteration of the software strives for more flexibility,
better performance and a better end-user experience than any previous version
of PyMC.</p>
<p>PyMC 2.2 will be released in early 2012. It contains numerous bugfixes and
optimizations, as well as a few new features. This user guide has been updated
for version 2.2.</p>
</div>
<div class="section" id="relationship-to-other-packages">
<h2>1.6. Relationship to other packages</h2>
<p>PyMC in one of many general-purpose MCMC packages. The most prominent among
them is <a class="reference external" href="http://www.mrc-bsu.cam.ac.uk/bugs/">WinBUGS</a><span class="link-target"> [http://www.mrc-bsu.cam.ac.uk/bugs/]</span>, which has made MCMC and with it Bayesian statistics
accessible to a huge user community. Unlike PyMC, WinBUGS is a stand-alone,
self-contained application. This can be an attractive feature for users without
much programming experience, but others may find it constraining. A related
package is <a class="reference external" href="http://www-ice.iarc.fr/~martyn/software/jags/">JAGS</a><span class="link-target"> [http://www-ice.iarc.fr/~martyn/software/jags/]</span>, which provides a more UNIX-like implementation of the BUGS
language. Other packages include <a class="reference external" href="http://www.cs.utah.edu/~hal/HBC/">Hierarchical Bayes Compiler</a><span class="link-target"> [http://www.cs.utah.edu/~hal/HBC/]</span> and a number of
<a class="reference external" href="http://cran.r-project.org/web/packages/">R packages</a><span class="link-target"> [http://cran.r-project.org/web/packages/]</span> of varying scope.</p>
<p>It would be difficult to meaningfully benchmark PyMC against these other
packages because of the unlimited variety in Bayesian probability models and
flavors of the MCMC algorithm. However, it is possible to anticipate how it
will perform in broad terms.</p>
<p>PyMC&#8217;s number-crunching is done using a combination of industry-standard
libraries (NumPy and the linear algebra libraries on which it depends) and
hand-optimized Fortran routines. For models that are composed of variables
valued as large arrays, PyMC will spend most of its time in these fast
routines. In that case, it will be roughly as fast as packages written entirely
in C and faster than WinBUGS. For finer-grained models containing mostly scalar
variables, it will spend most of its time in coordinating Python code. In that
case, despite our best efforts at optimization, PyMC will be significantly
slower than packages written in C and on par with or slower than WinBUGS.
However, as fine-grained models are often small and simple, the total time
required for sampling is often quite reasonable despite this poorer performance.</p>
<p>We have chosen to spend time developing PyMC rather than using an existing
package primarily because it allows us to build and efficiently fit any model
we like within a full-fledged Python environment. We have emphasized
extensibility throughout PyMC&#8217;s design, so if it doesn&#8217;t meet your needs out of
the box chances are you can make it do so with a relatively small amount of
code. See the <a class="reference external" href="https://github.com/pymc-devs/pymc/wiki/Testimonials">testimonials</a><span class="link-target"> [https://github.com/pymc-devs/pymc/wiki/Testimonials]</span> page on the wiki for reasons why other users have
chosen PyMC.</p>
</div>
<div class="section" id="getting-started">
<h2>1.7. Getting started</h2>
<p>This guide provides all the information needed to install PyMC, code a Bayesian
statistical model, run the sampler, save and visualize the results. In
addition, it contains a list of the statistical distributions currently
available. More <a class="reference external" href="https://github.com/pymc-devs/pymc/wiki">examples and tutorials</a><span class="link-target"> [https://github.com/pymc-devs/pymc/wiki]</span> are available from the PyMC web site.</p>
</div>
</div>


          </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Christopher J. Fonnesbeck.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1pre.
    </div>
  </body>
</html>